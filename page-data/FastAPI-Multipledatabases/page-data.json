{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/FastAPI-Multipledatabases/",
    "result": {"data":{"cur":{"id":"8f328073-7d55-56dd-9b01-a07fd8751fb2","html":"<h2 id=\"-intro\" style=\"position:relative;\"><a href=\"#-intro\" aria-label=\" intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ Intro</h2>\n<ul>\n<li>ì›ë˜ flaskë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ”ë° ì§€ì¸ë¶„ì˜ ì¶”ì²œìœ¼ë¡œ FastAPIë¥¼ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. FastAPIì—ì„œ libuv(node.js ì„±ëŠ¥ì˜ í•µì‹¬)ë¥¼ ì½”ì–´ë¡œ ì‚¬ìš©í•˜ëŠ” uvloopê°€ ë„ˆë¬´ ë§¤ë ¥ì  ì´ì—ˆê³ , <a href=\"https://asgi.readthedocs.io/en/latest/specs/main.html\">ASGI</a>ë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³´ê³ ì‹¶ì–´ì„œ FastAPIë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³¼ê¹Œ..? ë¼ëŠ” ë§ˆìŒìœ¼ë¡œ ì‚¬ìš©í•´ ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n<li>FastAPIë¡œ ê´€ë¦¬ì ì›¹ì„ ë§Œë“¤ë‹¤ê°€ ê¸°ì¡´ì— ì—°ê²°í•´ ë‘ì—ˆë˜ DBì— í•œê°œë¥¼ ì¶”ê°€ë¡œ ë” ì—°ê²°í•´ì„œ MultipleDatabasesë¥¼ êµ¬ì„±í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒê°ë³´ë‹¤ referenceê°€ ë§ì´ ì—†ì—ˆëŠ”ë°, FastAPIì˜ ì œì‘ìì´ì‹  <a href=\"https://github.com/tiangolo/fastapi/issues/2592\">tiangolo</a>ë‹˜ì˜ issuesì—ì„œ ì´ ë¬¸ì œë¥¼ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. Multipledatabasesì— ëŒ€í•´ ë‹¤ì–‘í•œë¶„ë“¤ì˜ ì˜ê²¬ì´ ì˜ ì •ë¦¬ë˜ì–´ìˆì–´ì„œ ì´ë¥¼ ì €ì˜ FastAPIì— ì ìš©í•œê²ƒì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.ğŸ™Œ</li>\n</ul>\n<h2 id=\"-ê·¸ì „ì—-fastapië€\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EC%A0%84%EC%97%90-fastapi%EB%9E%80\" aria-label=\" ê·¸ì „ì— fastapië€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ” ê·¸ì „ì—! FastAPIë€?</h2>\n<p><a href=\"https://fastapi.tiangolo.com/\">ê³µì‹ ë¬¸ì„œ</a>ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…ë˜ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</p>\n<p>FastAPI is a modern, fast (high-performance), web framework for building APIs with Python 3.6+ based on standard Python type hints.</p>\n<p>ì£¼ìš”ê¸°ëŠ¥:</p>\n<ul>\n<li>Fast: NodeJS ë° Goì™€ ë¹„ìŠ·í•œ ì„±ëŠ¥, í˜„ì¡´í•˜ëŠ” íŒŒì´ì¬ ì›¹ í”„ë ˆì„ì›Œí¬ ì¤‘ ê°€ì¥ ë¹ ë¥´ë‹¤.</li>\n<li>Fast to code</li>\n<li>Fewer bugs</li>\n<li>Intuitive</li>\n<li>Easy</li>\n<li>Short: ì ì€ë²„ê·¸ì™€ ì½”ë“œì¤‘ë³µì„ ìµœì†Œí™”í•  ìˆ˜ ìˆê³ , ê° ë§¤ê°œë³€ìˆ˜ ì„ ì–¸ì— ì—¬ëŸ¬ê¸°ëŠ¥ì„ ì œê³µí•´ì¤€ë‹¤.</li>\n<li>Robust: ë¬¸ì„œ ìë™í™” ë° ì‰¬ìš´ ë°°í¬ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>\n<li>Standards-based: ê°œë°©í˜• API í‘œì¤€(OpenAPI&#x26;JSON)ì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤.</li>\n</ul>\n<p>ì´ê²ƒë§Œ ì•„ë‹ˆë¼, í˜„ì¬ ì•„ì§ ë§ì€ ë ˆí¼ëŸ°ìŠ¤ê°€ ë‚˜ì™€ìˆì§€ëŠ” ì•Šì§€ë§Œ ê·¸ê²ƒì„ ë§¤ê¿”ì¤„ ë§¤ìš°ë§¤ìš° ìˆ˜ì¤€ë†’ì€ ê³µì‹ë¬¸ì„œê°€ ì˜ ë§ˆë ¨ë˜ì–´ì ¸ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ ì…ì¥ì—ì„œ APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  ë¬¸ì„œ ì‘ì—…ì´ ìƒê°ë³´ë‹¤ ë§ì€ ì‹œê°„ì´ ì†Œìš”ë˜ëŠ”ë°, FastAPIëŠ” ë¬¸ì„œì˜ ìë™í™”ë¥¼ ì œê³µí•´ì¤Œìœ¼ë¡œì¨ ê°œë°œìê°€ ë¬¸ì„œ ì‘ì—…ì— í• ì• í•˜ëŠ” ì‹œê°„ì„ ì¤„ì´ê³  ì˜¤ì§ ì½”ë“œì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì„œ ì—…ë¬´ íš¨ìœ¨ì„ ì¦ì§„ ì‹œì¼œì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"-multiple-databases-ì„¤ì •í•˜ê¸°\" style=\"position:relative;\"><a href=\"#-multiple-databases-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\" multiple databases ì„¤ì •í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š Multiple databases ì„¤ì •í•˜ê¸°</h2>\n<h3 id=\"1-settingspy\" style=\"position:relative;\"><a href=\"#1-settingspy\" aria-label=\"1 settingspy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. settings.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> os\r\n<span class=\"token keyword\">from</span> functools <span class=\"token keyword\">import</span> lru_cache\r\n<span class=\"token keyword\">from</span> pydantic <span class=\"token keyword\">import</span> BaseSettings\r\n\r\n_VERSION_ <span class=\"token operator\">=</span> <span class=\"token string\">\"0.1.0\"</span>\r\n\r\n<span class=\"token comment\">###multiple databases-1</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ISettings</span><span class=\"token punctuation\">(</span>BaseSettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    db_engine<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"mysql+pymysql\"</span>\r\n    db_host<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n    db_user<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"root\"</span>\r\n    db_password<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n    db_port<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">3306</span>\r\n    db_database<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n\r\n    debug<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\r\n\r\n    kakao_rest_key <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n\r\n    <span class=\"token decorator annotation punctuation\">@property</span>\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">db_dsn</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        dsn <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_engine<span class=\"token punctuation\">}</span></span><span class=\"token string\">://</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_user<span class=\"token punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_password<span class=\"token punctuation\">}</span></span><span class=\"token string\">@</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_host<span class=\"token punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_port<span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_database<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\r\n        <span class=\"token keyword\">return</span> dsn    \r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DevelopmentSettings</span><span class=\"token punctuation\">(</span>ISettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">pass</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductionSettings</span><span class=\"token punctuation\">(</span>ISettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    debug <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\r\n\r\n\r\n<span class=\"token comment\">###multiple databases-2</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ISettings2</span><span class=\"token punctuation\">(</span>BaseSettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    db_engine<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"mysql+pymysql\"</span>\r\n    db_host<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n    db_user<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"admin\"</span>\r\n    db_password<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n    db_port<span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span> <span class=\"token operator\">=</span> <span class=\"token number\">3306</span>\r\n    db_database<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n\r\n    debug<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\r\n\r\n    kakao_rest_key <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\r\n\r\n    <span class=\"token decorator annotation punctuation\">@property</span>\r\n    <span class=\"token keyword\">def</span> <span class=\"token function\">db_dsn</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n        dsn <span class=\"token operator\">=</span> <span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_engine<span class=\"token punctuation\">}</span></span><span class=\"token string\">://</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_user<span class=\"token punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_password<span class=\"token punctuation\">}</span></span><span class=\"token string\">@</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_host<span class=\"token punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_port<span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>db_database<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\r\n        <span class=\"token keyword\">return</span> dsn    \r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DevelopmentSettings2</span><span class=\"token punctuation\">(</span>ISettings2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">pass</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductionSettings2</span><span class=\"token punctuation\">(</span>ISettings2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    debug <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\r\n\r\n\r\n<span class=\"token decorator annotation punctuation\">@lru_cache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_settings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    config <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"FASTAPI_CONFIG\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">)</span>\r\n    configs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">:</span> DevelopmentSettings<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">:</span> ProductionSettings<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> DevelopmentSettings<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> configs<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> DevelopmentSettings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token decorator annotation punctuation\">@lru_cache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_settings2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    config <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"FASTAPI_CONFIG\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">)</span>\r\n    configs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">:</span> DevelopmentSettings2<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">:</span> ProductionSettings2<span class=\"token punctuation\">,</span>\r\n        <span class=\"token string\">\"default\"</span><span class=\"token punctuation\">:</span> DevelopmentSettings2<span class=\"token punctuation\">,</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">return</span> configs<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> DevelopmentSettings2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>ğŸ“Œ functools - @lru_cache** : LRU(Least Recently Used)ìºì‹±ì„ ì‚¬ìš©í•˜ê¸°ìœ„í•´ <strong>@lru_cache</strong>ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. @lru_cache ë°ì½”ë ˆì´í„°ëŠ” functools ë‚´ì¥ ëª¨ë“ˆë¡œ ë¶€í„° ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìœ¼ë©°, @lru_cache ë¥¼ ì•„ë¬´ í•¨ìˆ˜ ìœ„ì— ì„ ì–¸í•˜ë©´ ì‚¬ìš©í•˜ë©´ ê·¸ í•¨ìˆ˜ì— ë„˜ì–´ì˜¨ ì¸ìë¥¼ í‚¤(key)ë¡œ í•¨ìˆ˜ì˜ í˜¸ì¶œ ê²°ê³¼ë¥¼ ê°’(value)ìœ¼ë¡œ LRUìºì‹±ì´ ì ìš©ë©ë‹ˆë‹¤.</li>\n</ul>\n<h3 id=\"2-databasepy\" style=\"position:relative;\"><a href=\"#2-databasepy\" aria-label=\"2 databasepy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. database.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> sqlalchemy <span class=\"token keyword\">import</span> create_engine\r\n<span class=\"token keyword\">from</span> sqlalchemy<span class=\"token punctuation\">.</span>ext<span class=\"token punctuation\">.</span>declarative <span class=\"token keyword\">import</span> declarative_base\r\n<span class=\"token keyword\">from</span> sqlalchemy<span class=\"token punctuation\">.</span>orm <span class=\"token keyword\">import</span> sessionmaker\r\n\r\n<span class=\"token keyword\">from</span> api<span class=\"token punctuation\">.</span>settings <span class=\"token keyword\">import</span> get_settings<span class=\"token punctuation\">,</span> get_settings2\r\n\r\nBase_1 <span class=\"token operator\">=</span> declarative_base<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\nBase_2 <span class=\"token operator\">=</span> declarative_base<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\nSQLALCHEMY_DATABASE_URL <span class=\"token operator\">=</span> get_settings<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>db_dsn\r\nSQLALCHEMY_DATABASE_URL2 <span class=\"token operator\">=</span> get_settings2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>db_dsn\r\n\r\n<span class=\"token comment\">###multiple databases-1</span>\r\nengine1 <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span>SQLALCHEMY_DATABASE_URL<span class=\"token punctuation\">)</span>\r\nSessionLocal1 <span class=\"token operator\">=</span> sessionmaker<span class=\"token punctuation\">(</span>autocommit<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> autoflush<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> bind<span class=\"token operator\">=</span>engine1<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">###multiple databases-2</span>\r\nengine2 <span class=\"token operator\">=</span> create_engine<span class=\"token punctuation\">(</span>SQLALCHEMY_DATABASE_URL2<span class=\"token punctuation\">)</span>\r\nSessionLocal2 <span class=\"token operator\">=</span> sessionmaker<span class=\"token punctuation\">(</span>autocommit<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> autoflush<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> bind<span class=\"token operator\">=</span>engine2<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_db</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    session <span class=\"token operator\">=</span> SessionLocal1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">yield</span> session\r\n        session<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span>\r\n        session<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        \r\n<span class=\"token keyword\">def</span> <span class=\"token function\">get_db2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    session <span class=\"token operator\">=</span> SessionLocal2<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token keyword\">yield</span> session\r\n        session<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">finally</span><span class=\"token punctuation\">:</span>\r\n        session<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>ğŸ“Œ sqlalchemy : SQL ë¬¸ë²• ì—†ì´ ê°œë°œ ì¤‘ì¸ ì–¸ì–´ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ <strong>ORM(Object Relational Mapping)</strong> ì´ë¼ê³  í•©ë‹ˆë‹¤. ê·¸ ì¤‘ì—ì„œë„ <a href=\"https://www.sqlalchemy.org/\"><strong>sqlalchemy</strong></a>ì€ pythonì˜ ëŒ€í‘œì ì¸ ORMì…ë‹ˆë‹¤.</li>\n</ul>\n<h3 id=\"3-modelpy\" style=\"position:relative;\"><a href=\"#3-modelpy\" aria-label=\"3 modelpy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. model.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> api<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> Base_1<span class=\"token punctuation\">,</span> Base_2 \r\n<span class=\"token keyword\">from</span> api<span class=\"token punctuation\">.</span>models<span class=\"token punctuation\">.</span>base_model <span class=\"token keyword\">import</span> ModelBase\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DB_Schema1</span><span class=\"token punctuation\">(</span>Base_1<span class=\"token punctuation\">,</span> ModelBase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    __tablename__ <span class=\"token operator\">=</span> <span class=\"token string\">\"DB_Schema1_table\"</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DB_Schema2</span><span class=\"token punctuation\">(</span>Base_2<span class=\"token punctuation\">,</span> ModelBase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    __tablename__ <span class=\"token operator\">=</span> <span class=\"token string\">\"DB_Schema2_table\"</span> </code></pre></div>\n<h3 id=\"4-routepy\" style=\"position:relative;\"><a href=\"#4-routepy\" aria-label=\"4 routepy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. route.py</h3>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> fastapi <span class=\"token keyword\">import</span> APIRouter<span class=\"token punctuation\">,</span> Depends<span class=\"token punctuation\">,</span> Body\r\n<span class=\"token keyword\">from</span> api<span class=\"token punctuation\">.</span>database <span class=\"token keyword\">import</span> get_db<span class=\"token punctuation\">,</span> get_db2\r\n\r\nrouter <span class=\"token operator\">=</span> APIRouter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n\r\n<span class=\"token decorator annotation punctuation\">@router<span class=\"token punctuation\">.</span>get</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">\"/items/get_db1\"</span><span class=\"token punctuation\">,</span> description<span class=\"token operator\">=</span><span class=\"token string\">\"multiple DB\"</span>\r\n<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">get_db1</span><span class=\"token punctuation\">(</span>\r\n    db<span class=\"token operator\">=</span>Depends<span class=\"token punctuation\">(</span>get_db<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span>\r\n    \r\n    \r\n<span class=\"token decorator annotation punctuation\">@router<span class=\"token punctuation\">.</span>get</span><span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">\"/items/get_db2\"</span><span class=\"token punctuation\">,</span> description<span class=\"token operator\">=</span><span class=\"token string\">\"multiple DB\"</span>\r\n<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">get_db2</span><span class=\"token punctuation\">(</span>\r\n    db<span class=\"token operator\">=</span>Depends<span class=\"token punctuation\">(</span>get_db2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    \r\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span></code></pre></div>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://blog.neonkid.xyz/253\">https://blog.neonkid.xyz/253</a></li>\n<li><a href=\"https://pydantic-docs.helpmanual.io/usage/settings/\">pydantic - BaseSettings</a></li>\n<li><a href=\"https://fastapi.tiangolo.com/advanced/settings/\">FastAPI - pydantic BaseSettingsì˜ˆì œ</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-intro\">ğŸ’¡ Intro</a></p>\n</li>\n<li>\n<p><a href=\"#-%EA%B7%B8%EC%A0%84%EC%97%90-fastapi%EB%9E%80\">ğŸ” ê·¸ì „ì—! FastAPIë€?</a></p>\n</li>\n<li>\n<p><a href=\"#-multiple-databases-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">ğŸ“š Multiple databases ì„¤ì •í•˜ê¸°</a></p>\n<ul>\n<li><a href=\"#1-settingspy\">1. settings.py</a></li>\n<li><a href=\"#2-databasepy\">2. database.py</a></li>\n<li><a href=\"#3-modelpy\">3. model.py</a></li>\n<li><a href=\"#4-routepy\">4. route.py</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"ğŸ’¡ Intro ì›ë˜ flaskë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ”ë° ì§€ì¸ë¶„ì˜ ì¶”ì²œìœ¼ë¡œ FastAPIë¥¼ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. FastAPIì—ì„œ libuv(node.js ì„±ëŠ¥ì˜ í•µì‹¬)ë¥¼ ì½”ì–´ë¡œ ì‚¬ìš©í•˜ëŠ” uvloopê°€ ë„ˆë¬´ ë§¤ë ¥ì  ì´ì—ˆê³ , ASGIë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³´ê³ ì‹¶ì–´ì„œ FastAPIë¥¼ í•œë²ˆ ì‚¬ìš©í•´ë³¼ê¹Œ..? ë¼ëŠ” ë§ˆìŒìœ¼ë¡œ ì‚¬ìš©í•´ ë³´ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. FastAPIë¡œ ê´€ë¦¬ì ì›¹ì„ ë§Œë“¤ë‹¤ê°€ ê¸°ì¡´ì— ì—°ê²°í•´ ë‘ì—ˆë˜ DBì— í•œê°œë¥¼ ì¶”ê°€ë¡œ ë” ì—°ê²°í•´ì„œ MultipleDatabasesë¥¼ êµ¬ì„±í•´ì•¼í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒê°ë³´ë‹¤ referenceê°€ ë§ì´ ì—†ì—ˆëŠ”ë°, FastAPIì˜ ì œì‘ìì´ì‹  tiangoloë‹˜ì˜ issuesì—ì„œ ì´ ë¬¸ì œë¥¼ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. Multipledatabasesì— ëŒ€í•´ ë‹¤ì–‘í•œë¶„ë“¤ì˜ ì˜ê²¬ì´ ì˜ ì •ë¦¬ë˜ì–´ìˆì–´ì„œ ì´ë¥¼ ì €ì˜ FastAPIì— ì ìš©í•œê²ƒì„ ì •ë¦¬í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.ğŸ™Œ ğŸ” ê·¸ì „ì—! FastAPIë€? ê³µì‹ ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…ë˜ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. FastAPI is a modern, fast (highâ€¦","frontmatter":{"date":"March 30, 2022","title":"FastAPIì— 2ê°œ ì´ìƒì˜ DBì—°ë™í•˜ê¸°","categories":"AWS íŒŒì´ì¬ FastAPI","author":"Liam","emoji":"ğŸ’½"},"fields":{"slug":"/FastAPI-Multipledatabases/"}},"next":{"id":"a0f0a984-c811-5777-a190-b0efc223efad","html":"<h2 id=\"-intro\" style=\"position:relative;\"><a href=\"#-intro\" aria-label=\" intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ Intro</h2>\n<p>BootPayëŠ” ë¬´ë£Œë¡œ ì„œë¹„ìŠ¤ë˜ëŠ” ê²°ì œê²€ì¦APIì…ë‹ˆë‹¤. ì´ˆê¸°ì— ì¼ë°˜ PGì‚¬ì™€ ë³„ë„ì˜ ê³„ì•½ì—†ì´ ê°œë°œì„ ë¨¼ì € í•  ìˆ˜ ìˆì–´ì„œ, ì•±ê²°ì œê°€ ê¸‰í•˜ê²Œ í•„ìš”í–ˆë˜ ì €ëŠ” <a href=\"https://docs.bootpay.co.kr\">BootPay</a>ë¥¼ ì´ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©ë°©ë²•ì„ ì •ë¦¬í•´ ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.(ë§¤ìš°ê°„ë‹¨í•´ìš”!)ğŸ™Œ</p>\n<h2 id=\"-bootpayë€\" style=\"position:relative;\"><a href=\"#-bootpay%EB%9E%80\" aria-label=\" bootpayë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ” Bootpayë€?</h2>\n<p>ë¶€íŠ¸í˜ì´ëŠ” ê°œë°œìë¥¼ ìœ„í•œ ê²°ì œì—°ë™ ì„œë¹„ìŠ¤ë¡œ, êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤ì™€ ê°™ì´ ê²°ì œ ë°ì´í„° ë¶„ì„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë˜í•œ ì›¹, ì•± SDK ëª¨ë‘ ì§€ì›í•˜ë©° êµ­ë‚´ì™¸ ì—¬ëŸ¬ PG(ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)ì™€ ê²°ì œìˆ˜ë‹¨ì„ ì†ŒìŠ¤ì½”ë“œ í•œ ì¤„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h2 id=\"-ê²°ì œê²€ì¦\" style=\"position:relative;\"><a href=\"#-%EA%B2%B0%EC%A0%9C%EA%B2%80%EC%A6%9D\" aria-label=\" ê²°ì œê²€ì¦ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š ê²°ì œê²€ì¦</h2>\n<p>ë¶€íŠ¸í˜ì´ ì¸¡ì—ì„œëŠ” ê²°ì œê²€ì¦ì— ëŒ€í•´, ì´ë ‡ê²Œ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<p><strong>ê²°ì œ ê²€ì¦ì„ í•´ì•¼í•˜ëŠ” ì´ìœ </strong></p>\n<ul>\n<li>ê²°ì œ ì—°ë™ì€ Client Sideì—ì„œ ë™ì‘ë˜ê¸° ë•Œë¬¸ì— ê²°ì œ ê¸ˆì•¡ ë° ê²°ì œ ìƒíƒœì— ëŒ€í•œ ë³€ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤ê³  í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë°˜ë“œì‹œ ì²˜ìŒ ìš”ì²­í–ˆë˜ ê¸ˆì•¡ê³¼ ê²°ì œê°€ ì˜¬ë°”ë¥´ê²Œ ì´ë£¨ì–´ì¡ŒëŠ”ì§€ì— ëŒ€í•´ ì„œë²„ì‚¬ì´ë“œì—ì„œ ì„œë²„ë¡œ ì˜ìˆ˜ì¦ í‚¤ë¥¼ ë³´ë‚´ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼ í•©ë‹ˆë‹¤.</li>\n</ul>\n<p><strong>ê·¸ë ‡ë‹¤ë©´ ê²°ì œ ê²€ì¦ì„ ë¬´ì¡°ê±´ í•´ì•¼í•˜ë‚˜ìš”?</strong></p>\n<ul>\n<li>ê²°ì œ ê²€ì¦ì„ í•˜ì§€ ì•Šë”ë¼ë„ PGì‚¬ì—ì„œ ì œê³µí•˜ëŠ” ê²°ì œ ë¡œì§ì„ ëª¨ë‘ ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°©ê¸ˆ ë§í–ˆë‹¤ì‹œí”¼, ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ë§Œ Client Sideì—ì„œ ì–¸ì œë“  ë³€ì¡°ëœ ë°ì´í„°ë¥¼ êµ¬í˜„í•˜ì‹  ì„œë²„ë¡œ ë³´ë‚´ ë¶€ì •ì ì¸ ë°©ë²•ìœ¼ë¡œ êµ¬ë§¤ ì™„ë£Œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ê²°ì œê²€ì¦ì€ í•„ìˆ˜ë¡œ í•˜ëŠ”ê²ƒì´ ì¢‹ë‹¤ê³  Bootpayì—ì„œëŠ” ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h3 id=\"1-lambda-layerìƒì„±\" style=\"position:relative;\"><a href=\"#1-lambda-layer%EC%83%9D%EC%84%B1\" aria-label=\"1 lambda layerìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Lambda layerìƒì„±</h3>\n<p><a href=\"https://github.com/bootpay/server_python\">Bootpay ê²°ì œê²€ì¦ ë° ì·¨ì†Œ ëª¨ë“ˆ(python)</a>ì„ ë‹¤ìš´ ë°›ì€ ë’¤, ì•„ë˜ì™€ ê°™ì´ Lambda layerë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABd0lEQVQoz6WTy1LjMBBF/d38B7/BH8yONTUFM4sZkgx5lkNs2Xo/bPWlWkmYAN4Ach23LEu3r1p2NZsvcP/wC6v1Br2UkEp9i4pv680GXdcjhADnPfwE7l1/ap6xFpWUCqvVGhyJMsZxfCWfuOznd+PMMAwlsmhljEHTthDawzhfXIYYiwPrA0JK8DGWd5bHQkLvB2ifEGMsYufGzxULtKLD42yOthWQShd4/O+zws/HJX7Pl1jsDtgJjVp56DDg32qLzXYHYyyc88VhEUwplSxNK2CdQ0zHzJkIcgCWe4GnE7V06AI7IqQUj7ULoax7FdTa4NA0qOs9nHPgBCwaQixbzgRk/GckAhFhqhVBrlW9f0YrRLHO2Ur9ODqHnPMHhnFEOtWOLhKwkcpaW2rHky4nnK8pwfPJvhGkjBgDKnbF2+RWFhC9gSZgwZSGj1smoNLGgFGn+Bn4k1PaQMke+s8t5OLu+Kd8FaUUGtHjUG/R31yh+3GNFzEDoUzm6WiJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Add_layer.png\"\n        title=\"Add_layer.png\"\n        src=\"/static/67ae63c41af404d5de8480453da5d1b3/37523/Add_layer.png\"\n        srcset=\"/static/67ae63c41af404d5de8480453da5d1b3/e9ff0/Add_layer.png 180w,\n/static/67ae63c41af404d5de8480453da5d1b3/f21e7/Add_layer.png 360w,\n/static/67ae63c41af404d5de8480453da5d1b3/37523/Add_layer.png 720w,\n/static/67ae63c41af404d5de8480453da5d1b3/302a4/Add_layer.png 1080w,\n/static/67ae63c41af404d5de8480453da5d1b3/07a9c/Add_layer.png 1440w,\n/static/67ae63c41af404d5de8480453da5d1b3/b1ffc/Add_layer.png 1492w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"2-add-a-layer\" style=\"position:relative;\"><a href=\"#2-add-a-layer\" aria-label=\"2 add a layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Add a layer</h3>\n<p>ìƒì„±í•œ Bootpay layerë¥¼ Lambdaí•¨ìˆ˜ì— ì¶”ê°€í•´ ì¤ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeElEQVQ4y6WUa1KEMBCEuaj38RIew0vo6l/1x2qpu8AKeRES3mlr4sK+sARMVRcpIF81PTMEq4dH3N2v8PT8gtwYSJVBZcsVfCUJojiGVArGWg81C0VngyiKsV6/wlqLpmlQ1/ViVVWFQGuNtm1Bq+u6xXLOeU5ANrfbEFrn/uYcSL/oXG8ooCCTNAXjfHjYTQE759/tRaslYJ7niOMdwjACFYjgVV1PcnsO9A5ZXoILhSRJfKi9u96pm6gBqG25dxh6aJqmJ/kcZwS4k3ujwKIowLnwbUNXLgQ45xBSIk2Zdz0G+BVIVRZS+S6XUvk9FYjt4VmmfdgHp+MuDxkyjo/PDajB3zchpKkuPndWhjRuNHbWFl7U8X+1C01UeRbFAOSmwNuOIZQGVbt/MKO6F0ClNYTKwIQEywya7ienxUBbFCjLElRtU1Ro2g5uxvwey8/yec9NXWPnyGfg/2XWLhJ93bDXEkamCKjC/xFNVsQz8NtrsJsrfAOn9cyFwbcovwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lambda_layer.png\"\n        title=\"Lambda_layer.png\"\n        src=\"/static/5da65dd4ee83f09cacce616393e0da96/37523/Lambda_layer.png\"\n        srcset=\"/static/5da65dd4ee83f09cacce616393e0da96/e9ff0/Lambda_layer.png 180w,\n/static/5da65dd4ee83f09cacce616393e0da96/f21e7/Lambda_layer.png 360w,\n/static/5da65dd4ee83f09cacce616393e0da96/37523/Lambda_layer.png 720w,\n/static/5da65dd4ee83f09cacce616393e0da96/302a4/Lambda_layer.png 1080w,\n/static/5da65dd4ee83f09cacce616393e0da96/07a9c/Lambda_layer.png 1440w,\n/static/5da65dd4ee83f09cacce616393e0da96/f3abf/Lambda_layer.png 1474w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>ê·¸ë¦¬ê³  importí•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> lib<span class=\"token punctuation\">.</span>BootpayApi <span class=\"token keyword\">import</span> BootpayApi</code></pre></div>\n<h3 id=\"3-ê²€ì¦ì½”ë“œ-ì‘ì„±í•˜ê¸°\" style=\"position:relative;\"><a href=\"#3-%EA%B2%80%EC%A6%9D%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"3 ê²€ì¦ì½”ë“œ ì‘ì„±í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ê²€ì¦ì½”ë“œ ì‘ì„±í•˜ê¸°</h3>\n<p>ì•„ë˜ì™€ ê°™ì´ ê²€ì¦ì½”ë“œë§Œ ì‘ì„±í•˜ë©´ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ ê²°ì œ ê²€ì¦ì„ ëë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ˜€ ì €ëŠ” ì›¹ê²°ì œê°€ ì—†ì—ˆê¸° ë–„ë¬¸ì— ì•±ì—ì„œ ê²°ì œ í›„ ì„œë²„ì‚¬ì´ë“œì—ì„œ ê²°ì œ ê²€ì¦ë§Œ ì§„í–‰í•˜ì˜€ìœ¼ë©°, application_idì™€ private_keyëŠ” Bootpay ê´€ë¦¬ìì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ê²°ì œ ê¸ˆì•¡ìœ¼ë¡œ ë¹„êµë¥¼ í•´ì£¼ë©´ ë˜ëŠ”ë°, ê°€ê²©ë§ê³ ë„ ì›í•˜ëŠ” ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ì¶”ê°€ë¡œ ë¹„êµí•  ìˆ˜ ë„ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> lib<span class=\"token punctuation\">.</span>BootpayApi <span class=\"token keyword\">import</span> BootpayApi\r\n\r\nbootpay <span class=\"token operator\">=</span> BootpayApi<span class=\"token punctuation\">(</span>\r\n    <span class=\"token string\">'[[ application_id ]]'</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">'[[ private_key ]]'</span>\r\n<span class=\"token punctuation\">)</span>\r\n\r\nresult <span class=\"token operator\">=</span> bootpay<span class=\"token punctuation\">.</span>get_access_token<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">if</span> result<span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">is</span> <span class=\"token number\">200</span><span class=\"token punctuation\">:</span>\r\n    verify_result <span class=\"token operator\">=</span> bootpay<span class=\"token punctuation\">.</span>verify<span class=\"token punctuation\">(</span><span class=\"token string\">'[[ receipt_id ]]'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> verify_result<span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">is</span> <span class=\"token number\">200</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token comment\"># ì›ë˜ ì£¼ë¬¸í–ˆë˜ ê¸ˆì•¡ì´ ì¼ì¹˜í•˜ëŠ”ê°€?</span>\r\n        <span class=\"token comment\"># ê·¸ë¦¬ê³  ê²°ì œ ìƒíƒœê°€ ì™„ë£Œ ìƒíƒœì¸ê°€?</span>\r\n        <span class=\"token keyword\">if</span> verify_result<span class=\"token punctuation\">[</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'status'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">is</span> <span class=\"token number\">1</span> <span class=\"token keyword\">and</span> verify_result<span class=\"token punctuation\">[</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'price'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">is</span> price<span class=\"token punctuation\">:</span>\r\n            <span class=\"token comment\"># TODO: ì´ê³³ì´ ìƒí’ˆ ì§€ê¸‰ í˜¹ì€ ê²°ì œ ì™„ë£Œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë¡œì§ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</span></code></pre></div>\n<h2 id=\"-ê²€ì¦ê²°ê³¼\" style=\"position:relative;\"><a href=\"#-%EA%B2%80%EC%A6%9D%EA%B2%B0%EA%B3%BC\" aria-label=\" ê²€ì¦ê²°ê³¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ§© ê²€ì¦ê²°ê³¼</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\r\n  <span class=\"token string\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token string\">\"code\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token string\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token string\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token string\">\"receipt_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"order_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12345678910\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í…ŒìŠ¤íŠ¸ìŒì‹\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"unit\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"krw\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"pg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"kcp\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"card\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"pg_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"KCP\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"method_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ì¹´ë“œê²°ì œ\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"payment_data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token string\">\"card_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"BCì¹´ë“œ\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"card_no\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"card_quota\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"00\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"card_auth_no\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"receipt_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"n\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"í…ŒìŠ¤íŠ¸ìŒì‹\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"p\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"pg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"KCP\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"pm\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ì¹´ë“œê²°ì œ\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"pg_a\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"kcp\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"pm_a\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"card\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"o_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"p_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-12-27\"</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"s\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token string\">\"g\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"requested_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-12-27 16:47:52\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"purchased_at\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2021-12-27 16:48:53\"</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token string\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê²°ì œê°€ ì™„ë£Œë˜ë©´ â€œsâ€ê°’ì´ 1ì´ ë‚˜ì˜µë‹ˆë‹¤. â€œstatusâ€ì˜ ê²½ìš° í˜„ì¬ ê²°ì œì˜ ìƒíƒœë¥¼ ë³´ì—¬ì£¼ëŠ”ë°, ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">gist4\r\nê²°ì œ <span class=\"token function\">ìƒíƒœ</span> <span class=\"token punctuation\">(</span> í˜„ì¬ ê²°ì œì˜ ìƒíƒœë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤<span class=\"token punctuation\">.</span> ê²°ì œ ê²€ì¦ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì§€í‘œê°€ ë©ë‹ˆë‹¤<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token number\">0</span> <span class=\"token operator\">-</span> ê²°ì œ ëŒ€ê¸° ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span> ìŠ¹ì¸ì´ ë‚˜ê¸° ì „ì˜ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token number\">1</span> <span class=\"token operator\">-</span> ê²°ì œ ì™„ë£Œëœ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token number\">2</span> <span class=\"token operator\">-</span> ê²°ì œìŠ¹ì¸ ì „ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span> <span class=\"token function\">transactionConfirm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì…”ì„œ ê²°ì œë¥¼ ìŠ¹ì¸í•´ì•¼í•©ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token number\">3</span> <span class=\"token operator\">-</span> ê²°ì œìŠ¹ì¸ ì¤‘ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span> <span class=\"token constant\">PG</span>ì‚¬ì—ì„œ transaction ì²˜ë¦¬ì¤‘ì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token number\">20</span> <span class=\"token operator\">-</span> ê²°ì œê°€ ì·¨ì†Œëœ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token operator\">-</span><span class=\"token number\">20</span> <span class=\"token operator\">-</span> ê²°ì œì·¨ì†Œê°€ ì‹¤íŒ¨í•œ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token operator\">-</span><span class=\"token number\">30</span> <span class=\"token operator\">-</span> ê²°ì œì·¨ì†Œê°€ ì§„í–‰ì¤‘ì¸ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">-</span> ì˜¤ë¥˜ë¡œ ì¸í•´ ê²°ì œê°€ ì‹¤íŒ¨í•œ ìƒíƒœì…ë‹ˆë‹¤<span class=\"token punctuation\">.</span>\r\n<span class=\"token operator\">-</span><span class=\"token number\">2</span> <span class=\"token operator\">-</span> ê²°ì œìŠ¹ì¸ì´ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤<span class=\"token punctuation\">.</span></code></pre></div>\n<p>ì„œë¥˜ì‘ì„± ë° PGì‚¬ ì‹¬ì‚¬(ì•± ê²°ì œí…ŒìŠ¤íŠ¸ ë“±)ëŠ” ê±°ì˜ 3ì£¼ ê°€ê¹Œì´ ê±¸ë ¸ëŠ”ë°, ì„œë²„ì‚¬ì´ë“œì˜ ì‘ì—…ì€ 3ì‹œê°„ë„ ì±„ ê±¸ë¦¬ì§€ ì•Šê³  ì‘ì—…ì„ ëë‚¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\r\në˜í•œ Bootpay ê°œë°œìì™€ ì›í• í•œ ì†Œí†µë„ ê°€ëŠ¥í•˜ê³  Bootpay ë²„ê·¸ì— ëŒ€í•œ ìˆ˜ì • ìš”ì²­ë„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•´ ì£¼ê¸° ë•Œë¬¸ì—,(ìš°ë¦¬ëŠ” ì•±ë‹¨ì—ì„œ ìš”ì²­ì‚¬í•­ì´ ìˆì—ˆëŠ”ë°, 4ì¼ë‚´ë¡œ ì—…ë°ì´íŠ¸ í•´ì£¼ì…¨ìŒâ€¦)\r\nì € ì²˜ëŸ¼ ë¹ ë¥¸ì‹œì¼ë‚´ ì•±ê²°ì œ ì‹œìŠ¤í…œì´ í•„ìš”í•œê²½ìš°ê°€ ìˆìœ¼ì‹ ë¶„ì€ Bootpayë¥¼ í•œë²ˆ ê³ ë ¤í•´ë³´ëŠ”ê²ƒë„ ì¢‹ì€ ì„ íƒì¸ê²ƒ ê°™ìŠµë‹ˆë‹¤!ğŸ˜›</p>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://docs.bootpay.co.kr/rest/verify\">https://docs.bootpay.co.kr/rest/verify</a></li>\n<li><a href=\"https://medium.com/@bootpay.co.kr/%ED%8E%98%EC%9D%B4%EC%95%B1-api%EB%A1%9C-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-%EA%B2%B0%EC%A0%9C-%EA%B2%80%EC%A6%9D-2-3-4659bd100f86\">í˜ì´ì•±-apië¡œ-ì—°ë™í•˜ê¸°-ê²°ì œ-ê²€ì¦</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-intro\">ğŸ’¡ Intro</a></p>\n</li>\n<li>\n<p><a href=\"#-bootpay%EB%9E%80\">ğŸ” Bootpayë€?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EA%B2%B0%EC%A0%9C%EA%B2%80%EC%A6%9D\">ğŸ“š ê²°ì œê²€ì¦</a></p>\n<ul>\n<li><a href=\"#1-lambda-layer%EC%83%9D%EC%84%B1\">1. Lambda layerìƒì„±</a></li>\n<li><a href=\"#2-add-a-layer\">2. Add a layer</a></li>\n<li><a href=\"#3-%EA%B2%80%EC%A6%9D%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%ED%95%98%EA%B8%B0\">3. ê²€ì¦ì½”ë“œ ì‘ì„±í•˜ê¸°</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B2%80%EC%A6%9D%EA%B2%B0%EA%B3%BC\">ğŸ§© ê²€ì¦ê²°ê³¼</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 15, 2022","title":"AWS Lambdaì— Bootpayì—°ë™í•˜ê¸° - ê²°ì œê²€ì¦","categories":"AWS íŒŒì´ì¬ ë¶€íŠ¸í˜ì´","author":"Liam","emoji":"ğŸ’³"},"fields":{"slug":"/Lambda-Bootpay/"}},"prev":{"id":"5dad196f-3147-5f12-8cb1-82c531cee938","html":"<h2 id=\"-intro\" style=\"position:relative;\"><a href=\"#-intro\" aria-label=\" intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ Intro</h2>\n<ul>\n<li>Lambdaí•¨ìˆ˜ë¥¼ ì´ìš©í•´ íŠ¹ì •ì‹œê°„ì— ìë™ìœ¼ë¡œ ì¹´ìš´íŠ¸ë¥¼ í•´ì•¼í•˜ëŠ” ë°©ë²•ì´ í•„ìš”í•´ì¡Œë‹¤!ğŸ™Œ</li>\n<li>AWS LambdaëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ëŠ” ìˆìœ¼ë‚˜, í•„ìš”ì‹œì—ë§Œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. Lambdaì— ìˆëŠ” í•¨ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê¸°ìˆ ì„ ì°¾ë˜ ì¤‘, ì €ëŠ” Amazon CloudWatchì— ìˆëŠ” EventBridgeë¥¼ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<h2 id=\"-ë“¤ì–´ê°€ê¸°ì „-ì•Œê³ ê°€ê¸°--1\" style=\"position:relative;\"><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-%EC%95%8C%EA%B3%A0%EA%B0%80%EA%B8%B0--1\" aria-label=\" ë“¤ì–´ê°€ê¸°ì „ ì•Œê³ ê°€ê¸°  1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ” ë“¤ì–´ê°€ê¸°ì „, ì•Œê³ ê°€ê¸°! -1</h2>\n<p><strong>Lambda</strong></p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/welcome.html\">Lambda</a>ëŠ” ì„œë²„ë¥¼ í”„ë¡œë¹„ì €ë‹í•˜ê±°ë‚˜ ê´€ë¦¬í•˜ì§€ ì•Šê³ ë„ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì»´í“¨íŒ… ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. LambdaëŠ” ê³ ê°€ìš©ì„± ì»´í“¨íŒ… ì¸í”„ë¼ì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì„œë²„ì™€ ìš´ì˜ ì²´ì œ ìœ ì§€ ê´€ë¦¬, ìš©ëŸ‰ í”„ë¡œë¹„ì €ë‹ ë° ìë™ ì¡°ì •, ì½”ë“œ ë° ë³´ì•ˆ íŒ¨ì¹˜ ë°°í¬, ì½”ë“œ ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ë“± ëª¨ë“  ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ LambdaëŠ” í•„ìš”ì‹œì—ë§Œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©°, ì¼ì¼ ëª‡ ê°œì˜ ìš”ì²­ì—ì„œ ì´ˆë‹¹ ìˆ˜ì²œ ê°œì˜ ìš”ì²­ê¹Œì§€ ìë™ìœ¼ë¡œ í™•ì¥ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì‚¬ìš©í•œ ì»´í“¨íŒ… ì‹œê°„ë§Œí¼ë§Œ ë¹„ìš©ì„ ì§€ë¶ˆí•˜ê³ , ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•Šì„ ë•ŒëŠ” ìš”ê¸ˆì´ ë¶€ê³¼ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><strong>CloudWatch</strong></p>\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/WhatIsCloudWatch.html\">CloudWatch</a>ëŠ” Amazon Web Services(AWS) ë¦¬ì†ŒìŠ¤ ë° AWSì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤. CloudWatchë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ë° ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•´ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ì¸ ì§€í‘œë¥¼ ìˆ˜ì§‘í•˜ê³  ì¶”ì í•  ìˆ˜ ìˆìœ¼ë©°(<a href=\"https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html\">Amazon CloudWatch Logs</a>), <a href=\"https://docs.aws.amazon.com/ko_kr/eventbridge/latest/userguide/eb-what-is.html\">Amazon EventBridge</a>ë¥¼ ì´ìš©í•´ íŠ¹ì •í•œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.</li>\n<li><a href=\"https://docs.aws.amazon.com/ko_kr/eventbridge/latest/userguide/eb-what-is.html\">EventBridge</a>ëŠ” ê³¼ê±°ì—ëŠ”  Amazon CloudWatch Eventsë¼ê³  ë¶ˆë ¸ìœ¼ë©°, Zendesk ë˜ëŠ” Shopifyì™€ ê°™ì€ ì´ë²¤íŠ¸ ì†ŒìŠ¤ì˜ ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì„ AWS Lambda ë° ê¸°íƒ€ SaaS ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê°™ì€ ëŒ€ìƒìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ì´ë²¤íŠ¸ ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ëŒ€ê·œëª¨ë¡œ ì†ì‰½ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” ì„œë²„ë¦¬ìŠ¤ ì´ë²¤íŠ¸ ë²„ìŠ¤ì…ë‹ˆë‹¤.</li>\n</ul>\n<h2 id=\"-ë“¤ì–´ê°€ê¸°ì „-ì•Œê³ ê°€ê¸°--2\" style=\"position:relative;\"><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-%EC%95%8C%EA%B3%A0%EA%B0%80%EA%B8%B0--2\" aria-label=\" ë“¤ì–´ê°€ê¸°ì „ ì•Œê³ ê°€ê¸°  2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ” ë“¤ì–´ê°€ê¸°ì „, ì•Œê³ ê°€ê¸°! -2</h2>\n<p><strong>í¬ë¡ (Cron) í‘œí˜„ì‹ì´ë€?ğŸ¤”</strong></p>\n<ul>\n<li>EventBridgeëŠ” ì´ë²¤íŠ¸ë¥¼ ì„¸íŒ…í• ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ í¬ë¡  ì •ê·œí‘œí˜„ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ëŸ¼ í¬ë¡ ì‹ì´ ë¬´ì—‡ì¼ê¹Œìš”?(ì €ë„ ì´ë²ˆì— í¬ë¡ ì‹ì„ ì²˜ìŒ ê²½í—˜í•´ ë³´ì•˜ëŠ”ë°, ì“¸ ê²½ìš°ê°€ ì¢…ì¢… ìƒê¸¸ ê²ƒ ê°™ì•„ì„œ ì •ë¦¬í•´ë‘ë ¤ê³  í•©ë‹ˆë‹¤.)</li>\n<li>ìœ ë‹‰ìŠ¤ ê³„ì—´ì˜ ìš´ì˜ì²´ì œì—ì„œ ì‹œê°„ ê¸°ë°˜ìœ¼ë¡œ job schedulingì„ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ <a href=\"https://docs.oracle.com/cd/E12058_01/doc/doc.1014/e12030/cron_expressions.htm\">í¬ë¡  í‘œí˜„ì‹(Cron Expressions)</a>ë¼ê³  í•˜ë©° ìë°” ìŠ¤í”„ë§ì˜ Quartzë‚˜ Spring Schedulerì—ì„œë„ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤ê³  í•©ë‹ˆë‹¤. ë˜í•œ, í¬ë¡  í‘œí˜„ì‹ì€ í•„ë“œì™€ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì¡°í•©í•˜ì—¬ ìŠ¤ì¼€ì¥´ë§ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ë¦¬ëˆ…ìŠ¤/ìœ ë‹‰ìŠ¤ í¬ë¡  í‘œí˜„ì‹ì—ì„œëŠ” 5ê°œì˜ í•„ë“œë¥¼ ì‚¬ìš©í•˜ê³ , Quartz ê¸°ë°˜ì˜ í¬ë¡  í‘œí˜„ì‹ì—ì„œëŠ” 7ê°œì˜ í•„ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” String ë¬¸ìì—´ì…ë‹ˆë‹¤. ê³µë°±ìœ¼ë¡œ êµ¬ë¶„í•˜ê³ (â€ â€) ê° í•„ë“œëŠ” ì•ì—ì„œ ë¶€í„° ì´ˆ, ë¶„, ì‹œ, ì¼, ì›”, ìš”ì¼, ë…„ìœ¼ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.</li>\n</ul>\n<p><strong>í¬ë¡  í‘œí˜„ì‹ í‘œí˜„</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 531px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB8klEQVQozz1TibKcIBD0/z8xyavs011PBFGQQ7RTPdFnlQVzwHTPNBUAaG1QN2+sm6OJGCPatkPX9fiuG8SUYZYFr+8Gfd+jbj7IR8EwDBLv+wF1/YbfA6pSCrRZYIzB5hyu60I+DlhroY2BtavYKSUYs0CpWXxHKfDey5nFWmybk8JVCAGTUoJgUhopZZRyCtLjOP6vpeC6IJcui8UFoNy+8zzlzJNX6WVF8+nQ9hPaYcLmA7Y9wu0Ry+pk3XyEDwnGbugGJba7c5hP/2NXhDmpGWrW0MYK7JgO5HxgDxEpH+Jjz7zfMWsjvudnzO3hZ18Rtl1XqHnGum431YJynogpyUqb1NgeUj7KKfSeWIgR53lJ0er31wvvbsQ4G3zaHt/vDtaFH8rbTYuUVxcwGYs9HeJffYC2G0Zl0EorAqo9BLTdgJkTnDViTAJfKocoVbPsk6iBOWaxCDFJTspZ5MLB8FxFxzCMkshL2QLKhJPm5Q+9fQ/SP/abuo23GpjLwqTPffXrz1+86jcmvci0v14NVv9M2d8TTRiURv3p8OlHUYORWMC8rBL7dKO0oGIzOZSuH+H8Ls0XhOcJ57zQIkpqkCzGSUHNRtAROXOphgdtxalS8XwVpMiPl/HF0GaB87pEyHwNVAJXxglGhJ2z2Dz3Dz+fnu+iWDR9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cron1.png\"\n        title=\"cron1.png\"\n        src=\"/static/db781eadd48f9b1a2eb3302ce4a351c5/d4713/cron1.png\"\n        srcset=\"/static/db781eadd48f9b1a2eb3302ce4a351c5/e9ff0/cron1.png 180w,\n/static/db781eadd48f9b1a2eb3302ce4a351c5/f21e7/cron1.png 360w,\n/static/db781eadd48f9b1a2eb3302ce4a351c5/d4713/cron1.png 531w\"\n        sizes=\"(max-width: 531px) 100vw, 531px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<ul>\n<li>: ëª¨ë“  ê°’</li>\n</ul>\n</li>\n<li><strong>?</strong> : íŠ¹ì •í•œ ê°’ì´ ì—†ìŒ</li>\n<li><strong>-</strong> : ë²”ìœ„ë¥¼ ëœ» í•¨ (ì˜ˆ) ì›”ìš”ì¼ì—ì„œ ìˆ˜ìš”ì¼ê¹Œì§€ëŠ” MON-WEDë¡œ í‘œí˜„</li>\n<li><strong>,</strong> : íŠ¹ë³„í•œ ê°’ì¼ ë•Œë§Œ ë™ì‘ (ì˜ˆ) ì›”,ìˆ˜,ê¸ˆ MON,WED,FRI</li>\n<li><strong>/</strong> : ì‹œì‘ì‹œê°„ / ë‹¨ìœ„  (ì˜ˆ) 0ë¶„ë¶€í„° ë§¤ 5ë¶„ 0/5</li>\n<li><strong>L</strong> : ì¼ì—ì„œ ì‚¬ìš©í•˜ë©´ ë§ˆì§€ë§‰ ì¼, ìš”ì¼ì—ì„œëŠ” ë§ˆì§€ë§‰ ìš”ì¼(í† ìš”ì¼)</li>\n<li><strong>W</strong> : ê°€ì¥ ê°€ê¹Œìš´ í‰ì¼ (ì˜ˆ) 15WëŠ” 15ì¼ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ í‰ì¼ (ì›” ~ ê¸ˆ)ì„ ì°¾ìŒ</li>\n<li><strong>#</strong> : ëª‡ì§¸ì£¼ì˜ ë¬´ìŠ¨ ìš”ì¼ì„ í‘œí˜„ (ì˜ˆ) 3#2 : 2ë²ˆì§¸ì£¼ ìˆ˜ìš”ì¼</li>\n</ul>\n<p><strong>í¬ë¡  í‘œí˜„ì‹ ì˜ˆì œ</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 718px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACFUlEQVQ4y21U2XKkMAz0///lbjLD5QsfGLChUy1m2GwqD10GqSW3DlCtHYgxoh9GWOdxnCdoO45fcJ7IecF5nr/6GafoTCnBOY+lFAmik/bvOI4TMSXMcxD89L8vUWXdYayH9QExFyxlu7DuP7BBW4+PR49RW5Rt/5WjamsIMWEOEWXdsNcmoF1QL9CmrcM4GcSYbnv9xiVHrXuFDxHWz8jLKjcT61Yv7BW1HZhjxqMboI2TXoe0YG+H+N9cxql13xFCkoRLWYWwvVGb2FJeYJxHP0wYtcGkjSRNaRE/lb1jFF/mmCSAvdvkxkthO044N+PR9VLqMGqMk8WzHyXpsxvgQ0I9zlul4g1UJ4NxV9mXyqu3VxIj6giWzHPS9j5jXoRPIYpBJDk/yy76OUqpojxEPJ+Xuq4fpFyC/MnY15A0Qsx32YrZqcz5IKSYlls+b+XAmKQbJlHb9aMkHCYjvjmkezAylL1WxJThfZAGc6JchXYc8nyekPd+vBIa6xBilJOqDvrb9ZVwdRSX0c0R2niRzgVNS7mQX1iKrMzHo0M/aqmEJ4cZ8/9cte07/Bxu8FaexlhY66F5OodhnGSyLL0bJ7G/bWwZuZyDymWVVeDajDKxgvJa6HVv8jn9/Xziz2eHz5dKrg25VMmKyCOfcaq1hpyyfE7rur3+GlcP+VxrhbFWFPOnoI0RJXzOOUvf/v1tGr4A0GuGC6eKrA4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cron2.png\"\n        title=\"cron2.png\"\n        src=\"/static/0ba4ce395992e48516cee93cbea77370/57dc1/cron2.png\"\n        srcset=\"/static/0ba4ce395992e48516cee93cbea77370/e9ff0/cron2.png 180w,\n/static/0ba4ce395992e48516cee93cbea77370/f21e7/cron2.png 360w,\n/static/0ba4ce395992e48516cee93cbea77370/57dc1/cron2.png 718w\"\n        sizes=\"(max-width: 718px) 100vw, 718px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>í¬ë¡  í‘œí˜„ì‹ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•˜ë©´ì„œ ëŠë‚€ì ì€, ì–´ëŠì •ë„ë§Œ ì•Œë©´ ì „í˜€ ì–´ë µì§€ ì•Šë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. í‘œë¥¼ ë³´ê³  ëŒ€ì¶© ì´í•´í•˜ì—¬ í•œë²ˆë§Œ ë§Œë“¤ì–´ë´ë„ ë‹¤ìŒ ë¶€í„°ëŠ” ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ğŸ˜€</li>\n<li><a href=\"http://www.cronmaker.com/?1\">CronMaker</a>ë¼ëŠ” ì›í•˜ëŠ” í¬ë¡  í‘œí˜„ì‹ì„ ìƒì„±í•´ ì£¼ëŠ” ì‚¬ì´íŠ¸ ì¡´ì¬í•©ë‹ˆë‹¤. ëŒ€ì¶© í¬ë¡  í‘œí˜„ì‹ì„ ë§Œë“  í›„, ë‚´ê°€ ë§Œë“  í¬ë¡  í‘œí˜„ì‹ì„ ì…ë ¥í•˜ê³  Calcurate  next dates ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë‚´ê°€ ë§Œë“  í¬ë¡  í‘œí˜„ì‹ìœ¼ë¡œ ì–¸ì œ ì‹¤í–‰ë ê²ƒì¸ì§€ ë¯¸ë¦¬ ë³¼ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë„ ì¡´ì¬í•©ë‹ˆë‹¤.</li>\n</ul>\n<h2 id=\"-lambda-ì½”ë“œì‘ì„±\" style=\"position:relative;\"><a href=\"#-lambda-%EC%BD%94%EB%93%9C%EC%9E%91%EC%84%B1\" aria-label=\" lambda ì½”ë“œì‘ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“š Lambda ì½”ë“œì‘ì„±</h2>\n<h3 id=\"1-lambda-í•¨ìˆ˜ìƒì„±\" style=\"position:relative;\"><a href=\"#1-lambda-%ED%95%A8%EC%88%98%EC%83%9D%EC%84%B1\" aria-label=\"1 lambda í•¨ìˆ˜ìƒì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Lambda í•¨ìˆ˜ìƒì„±</h3>\n<p>ì•„ë˜ì™€ ê°™ì´ ë³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ë¥¼ ì„ íƒí•œ í›„, Lambda í•¨ìˆ˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  VPCë° í•¨ìˆ˜ì— í•„ìš”í•œ <a href=\"https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/configuration-layers.html\">Lambda Layer</a>ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABLElEQVQoz51S7W7DIAzkhfdC+z3tOfZn79GqUqe1ISEJGEM+brIbunSdpi5IJwwyx51ts9vv4ZxDSgkxxu1ghg8BprIWzIxxHDEMg0LiLRBSJex6D6KoP+RhwDzPGKcJ0x+QnJ8r5Qxzriq4tkWMjECkpCllfXBDspzlI1EjsSzJK+RKeLINgpAFuoAIRKQ1LWCpLzNyzlcSLER3hJWtESjqQZTlZRfwQlZIJUcUSlwU3lm2TYs0jCs737YU5W4V/9Y4ea+EbddfFYktqaXstBqHUl/mtBqvksc6JcWBkSb0fa/NmFdF/i+AWUnN6XyGdLr3XlVsQvCg4FWYORwOOB4/Llb4YoMfwE3eCDCAkCcYUdZ5j8Y5NG37MGR269ri03nU7y+wr0+o357xBY3ep8uvFmXOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Lambda.png\"\n        title=\"Lambda.png\"\n        src=\"/static/afeb3a803994ac1e65d0a7662d4770a0/37523/Lambda.png\"\n        srcset=\"/static/afeb3a803994ac1e65d0a7662d4770a0/e9ff0/Lambda.png 180w,\n/static/afeb3a803994ac1e65d0a7662d4770a0/f21e7/Lambda.png 360w,\n/static/afeb3a803994ac1e65d0a7662d4770a0/37523/Lambda.png 720w,\n/static/afeb3a803994ac1e65d0a7662d4770a0/b97f6/Lambda.png 958w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"2-lambda-ì½”ë“œì‘ì„±\" style=\"position:relative;\"><a href=\"#2-lambda-%EC%BD%94%EB%93%9C%EC%9E%91%EC%84%B1\" aria-label=\"2 lambda ì½”ë“œì‘ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Lambda ì½”ë“œì‘ì„±</h3>\n<p>ìë™ìœ¼ë¡œ ì¹´ìš´íŠ¸ í•´ì£¼ì–´ì•¼í•  ë°ì´í„°ë¥¼ ì¡°ê±´ì— ë”°ë¼ì„œ ê°€ì§“ ìˆ˜ë¥¼ ë‚˜ëˆ„ì–´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì €ëŠ” í•„ìš”ì— ë”°ë¼ S3ì™€ RDSë¥¼ ì—°ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> json\r\n<span class=\"token keyword\">import</span> base64<span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">,</span> boto3<span class=\"token punctuation\">,</span> ast<span class=\"token punctuation\">,</span> copy\r\n<span class=\"token keyword\">import</span> json\r\n<span class=\"token keyword\">import</span> pymysql\r\n<span class=\"token keyword\">import</span> ast \r\n<span class=\"token keyword\">import</span> db_config\r\n\r\nAISCAN_URL <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\r\nrds_host <span class=\"token operator\">=</span> db_config<span class=\"token punctuation\">.</span>rds_host\r\nname <span class=\"token operator\">=</span> db_config<span class=\"token punctuation\">.</span>name\r\npassword <span class=\"token operator\">=</span> db_config<span class=\"token punctuation\">.</span>password\r\ndb_name <span class=\"token operator\">=</span> db_config<span class=\"token punctuation\">.</span>db_name \r\n<span class=\"token comment\">########### init s3 bucket info</span>\r\ns3 <span class=\"token operator\">=</span> boto3<span class=\"token punctuation\">.</span>resource<span class=\"token punctuation\">(</span><span class=\"token string\">'s3'</span><span class=\"token punctuation\">)</span> \r\nbucket_name <span class=\"token operator\">=</span> <span class=\"token string\">''</span>\r\n<span class=\"token keyword\">def</span> <span class=\"token function\">lambda_handler</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \r\n    conn <span class=\"token operator\">=</span> pymysql<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>rds_host<span class=\"token punctuation\">,</span> user<span class=\"token operator\">=</span>name<span class=\"token punctuation\">,</span> passwd<span class=\"token operator\">=</span>password<span class=\"token punctuation\">,</span> db<span class=\"token operator\">=</span>db_name<span class=\"token punctuation\">,</span> connect_timeout<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>    \r\n    c_query <span class=\"token operator\">=</span> <span class=\"token string\">''</span> \r\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\r\n    \r\n    <span class=\"token keyword\">with</span> conn<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span>pymysql<span class=\"token punctuation\">.</span>cursors<span class=\"token punctuation\">.</span>DictCursor<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> cur<span class=\"token punctuation\">:</span>\r\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>Amazon EventBridge ê·œì¹™ ìƒì„±ì€ ë‹¤ìŒ í¬ìŠ¤íŒ…ì— ì´ì–´ì„œ ì‘ì„±ì„ í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.ğŸ˜€</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-intro\">ğŸ’¡ Intro</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-%EC%95%8C%EA%B3%A0%EA%B0%80%EA%B8%B0--1\">ğŸ” ë“¤ì–´ê°€ê¸°ì „, ì•Œê³ ê°€ê¸°! -1</a></p>\n</li>\n<li>\n<p><a href=\"#-%EB%93%A4%EC%96%B4%EA%B0%80%EA%B8%B0%EC%A0%84-%EC%95%8C%EA%B3%A0%EA%B0%80%EA%B8%B0--2\">ğŸ” ë“¤ì–´ê°€ê¸°ì „, ì•Œê³ ê°€ê¸°! -2</a></p>\n</li>\n<li>\n<p><a href=\"#-lambda-%EC%BD%94%EB%93%9C%EC%9E%91%EC%84%B1\">ğŸ“š Lambda ì½”ë“œì‘ì„±</a></p>\n<ul>\n<li><a href=\"#1-lambda-%ED%95%A8%EC%88%98%EC%83%9D%EC%84%B1\">1. Lambda í•¨ìˆ˜ìƒì„±</a></li>\n<li><a href=\"#2-lambda-%EC%BD%94%EB%93%9C%EC%9E%91%EC%84%B1\">2. Lambda ì½”ë“œì‘ì„±</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 04, 2022","title":"AWS CloudWatchë¡œ íŠ¹ì •ì‹œê°„ ìë™ ì¹´ìš´íŠ¸í•˜ê¸° -1","categories":"AWS íŒŒì´ì¬","author":"Liam","emoji":"ğŸ’³"},"fields":{"slug":"/Lambda-CloudWatch1/"}},"site":{"siteMetadata":{"siteUrl":"https://liampoet.github.io","comments":{"utterances":{"repo":"liampoet/liampoet.github.io"}}}}},"pageContext":{"slug":"/FastAPI-Multipledatabases/","nextSlug":"/Lambda-Bootpay/","prevSlug":"/Lambda-CloudWatch1/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}